webpackJsonp([4,24,25],{"3Big":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("a3Yh"),o=t.n(r),l=t("KPSb"),i=t.n(l),s=t("E4LH"),n=t("A+mb"),d={data:function(){return{agentReadonly:!1,priseimageUrl:"",priseurl:"",licensePicNo:"",visible:!1,labelPosition:"right",agencylevelArr:[],dataForm:{id:0,businNumber:"",companyName:"",bussicAdress:"",lawName:"",businNum:"",busindate1:"",busindate2:"",username:"",mobile:"",email:"",work:"",loginAcc:"",pwd:"",agencylevel:"",price:"",allowCounts:""},datarules:{businNumber:[{required:!0,message:"请输入最长为6的商家编号（只能为数字）",trigger:"blur"}],companyName:[{required:!0,message:"请输入公司名称",trigger:"blur"}],bussicAdress:[{required:!0,message:"请输入营业执照所在地",trigger:"blur"}],lawName:[{required:!0,message:"请输入法人姓名",trigger:"blur"}],businNum:[{required:!0,message:"请输入营业执照号",trigger:"blur"}],busindate1:[{required:!0,message:"请输入营业期限",trigger:"blur"}],username:[{required:!0,message:"请输入联系人姓名",trigger:"blur"}],mobile:[{required:!0,message:"请输入联系电话",trigger:"blur"},{validator:function(e,a,t){Object(s.b)(a)?t():t(new Error("手机号格式错误"))},trigger:"blur"}],loginAcc:[{required:!0,message:"请输入登录账号",trigger:"blur"}],pwd:[{required:!0,message:"请输入初始密码",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],work:[{required:!0,message:"请输入职务",trigger:"blur"}],price:[{required:!0,message:"请输入单价",trigger:"blur"}],allowCounts:[{required:!0,message:"请输入允许超出条数",trigger:"blur"}]}}},watch:{dataForm:{handler:function(e,a){this.dataForm.loginAcc=this.dataForm.mobile},deep:!0}},methods:{showInit:function(e){var a=this;this.dataForm.id=e||0,this.visible=!0,this.$http({url:this.$http.adornUrl("agent/level/list?token="+this.$cookie.get("token")),method:"get"}).then(function(e){var t=e.data;t&&0===t.code?a.agencylevelArr=t.data:a.agencylevelArr=[]}),this.$nextTick(function(){a.$refs.dataForm.resetFields()}),this.priseurl=this.$http.adornUrl("agent/agentInfo/license/upload?token="+this.$cookie.get("token")),this.dataForm.id&&(this.agentReadonly=!0,this.$http({url:this.$http.adornUrl("agent/agentInfo/detail?token="+this.$cookie.get("token")+"&agentId="+this.dataForm.id),method:"get",params:this.$http.adornParams()}).then(function(e){var t=e.data;t&&0===t.code&&(a.priseimageUrl=n.a.imgUrl+t.data.licenseUrl,a.dataForm.businNumber=t.data.mchId,a.dataForm.companyName=t.data.companyName,a.dataForm.bussicAdress=t.data.address,a.dataForm.lawName=t.data.legalPerson,a.dataForm.businNum=t.data.licenseNo,a.dataForm.busindate1=t.data.effectDate,a.dataForm.busindate2=t.data.expireDate,a.dataForm.username=t.data.contactName,a.dataForm.mobile=t.data.mobile,a.dataForm.email=t.data.email,a.dataForm.work=t.data.position,a.dataForm.loginAcc=t.data.mobile,a.dataForm.agencylevel=t.data.levelId,a.dataForm.price=t.data.price,a.dataForm.allowCounts=t.data.emptyWarnNumber)}))},probusinNumber:function(){this.dataForm.businNumber=this.dataForm.businNumber.replace(/[^0-9]*/g,"").replace(/\b(0+)/gi,"")},dataFormSubmit:function(){var e=this;this.$refs.dataForm.validate(function(a){var t;a?e.$http({url:e.$http.adornUrl("agent/agentInfo/"+(e.dataForm.id?"update":"save")+"?token="+e.$cookie.get("token")),method:"post",params:e.$http.adornParams((t={agentId:e.dataForm.id||void 0,licensePicNo:e.licensePicNo,companyName:e.dataForm.companyName,mchId:e.dataForm.businNumber,address:e.dataForm.bussicAdress,email:e.dataForm.email,legalPerson:e.dataForm.lawName,licenseNo:e.dataForm.businNum,effectDate:e.dataForm.busindate1,expireDate:e.dataForm.busindate2,contactName:e.dataForm.username,position:e.dataForm.work,mobile:e.dataForm.mobile},o()(t,"email",e.dataForm.email),o()(t,"password",e.dataForm.pwd?i()(e.dataForm.pwd):""),o()(t,"levelId",e.dataForm.agencylevel),o()(t,"price",e.dataForm.price),o()(t,"emptyWarnNumber",e.dataForm.allowCounts),t))}).then(function(a){var t=a.data;t&&0===t.code?e.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){e.visible=!1,e.$emit("refreshDataList")}}):e.$message.error(t.msg)}):e.$message.error("请完善信息!")})},clearAgent:function(){this.visible=!1,this.priseimageUrl="",this.dataForm.busindate1="",this.dataForm.busindate2=""},beforeAvatarUpload:function(e){var a="image/jpeg"===e.type||"image/png"==e.type||"image/jpg"==e.type,t=e.size/1024/1024<2;return a||this.$message.error("上传头像图片只能是 JPG 格式!"),t||this.$message.error("上传头像图片大小不能超过 2MB!"),a&&t},perisehandleAvatarSuccess:function(e,a){this.priseimageUrl=URL.createObjectURL(a.raw),this.licensePicNo=e.data.licensePicNo},closeDialog:function(e){e(),this.priseimageUrl="",this.dataForm.busindate1="",this.dataForm.busindate2="",this.dataForm.pwd=""},changeLevel:function(e){var a;a=this.agencylevelArr;for(var t=0;t<a.length;t++)a[t].id==e&&(this.dataForm.price=a[t].price,this.dataForm.allowCounts=a[t].emptyWarnNumber)}}},c={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-dialog",{attrs:{title:e.dataForm.id?"修改":"新增","close-on-click-modal":!1,visible:e.visible,"before-close":e.closeDialog},on:{"update:visible":function(a){e.visible=a}}},[t("el-form",{ref:"dataForm",staticClass:"demo-ruleForm",attrs:{model:e.dataForm,rules:e.datarules,"label-width":"150px","label-position":e.labelPosition}},[t("h3",[e._v("基本信息")]),e._v(" "),t("el-form-item",{attrs:{label:"营业执照：",prop:""}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.priseurl,accept:"image/jpeg,image/jpg,image/png","show-file-list":!1,"on-success":e.perisehandleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.priseimageUrl?t("img",{staticClass:"avatar",attrs:{src:e.priseimageUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e._v(" "),t("span",[e._v("（上传后，以下部分信息可自动导入）")])],1),e._v(" "),t("el-form-item",{attrs:{label:"商户编号：",prop:"businNumber"}},[t("el-input",{attrs:{placeholder:"商户编号",maxlength:"6"},nativeOn:{keyup:function(a){e.probusinNumber(a)}},model:{value:e.dataForm.businNumber,callback:function(a){e.$set(e.dataForm,"businNumber",a)},expression:"dataForm.businNumber"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"公司名称：",prop:"companyName"}},[t("el-input",{attrs:{placeholder:"公司名称"},model:{value:e.dataForm.companyName,callback:function(a){e.$set(e.dataForm,"companyName",a)},expression:"dataForm.companyName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"营业执照所在地：",prop:"bussicAdress"}},[t("el-input",{attrs:{placeholder:"营业执照所在地"},model:{value:e.dataForm.bussicAdress,callback:function(a){e.$set(e.dataForm,"bussicAdress",a)},expression:"dataForm.bussicAdress"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"法人姓名：",prop:"lawName"}},[t("el-input",{attrs:{placeholder:"法人姓名"},model:{value:e.dataForm.lawName,callback:function(a){e.$set(e.dataForm,"lawName",a)},expression:"dataForm.lawName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"营业执照号：",prop:"businNum"}},[t("el-input",{attrs:{placeholder:"营业执照号"},model:{value:e.dataForm.businNum,callback:function(a){e.$set(e.dataForm,"businNum",a)},expression:"dataForm.businNum"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"营业期限：",prop:"busindate1"}},[t("el-input",{staticStyle:{width:"35%"},attrs:{placeholder:"2018-08-18"},model:{value:e.dataForm.busindate1,callback:function(a){e.$set(e.dataForm,"busindate1",a)},expression:"dataForm.busindate1"}}),e._v("至\n            "),t("el-input",{staticStyle:{width:"35%"},attrs:{placeholder:"2020-12-25"},model:{value:e.dataForm.busindate2,callback:function(a){e.$set(e.dataForm,"busindate2",a)},expression:"dataForm.busindate2"}})],1),e._v(" "),t("h3",[e._v("联系人信息")]),e._v(" "),t("el-form-item",{attrs:{label:"联系人姓名：",prop:"username"}},[t("el-input",{attrs:{placeholder:"联系人姓名"},model:{value:e.dataForm.username,callback:function(a){e.$set(e.dataForm,"username",a)},expression:"dataForm.username"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"联系人手机号：",prop:"mobile"}},[t("el-input",{attrs:{placeholder:"联系人手机号",maxlength:"11",readonly:e.agentReadonly},model:{value:e.dataForm.mobile,callback:function(a){e.$set(e.dataForm,"mobile",a)},expression:"dataForm.mobile"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"联系人邮箱：",prop:"email"}},[t("el-input",{attrs:{placeholder:"联系人邮箱"},model:{value:e.dataForm.email,callback:function(a){e.$set(e.dataForm,"email",a)},expression:"dataForm.email"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"职务：",prop:"work"}},[t("el-input",{attrs:{placeholder:"职务"},model:{value:e.dataForm.work,callback:function(a){e.$set(e.dataForm,"work",a)},expression:"dataForm.work"}})],1),e._v(" "),t("h3",[e._v("账号信息")]),e._v(" "),t("el-form-item",{attrs:{label:"登录账号：",prop:"loginAcc"}},[t("el-input",{attrs:{placeholder:"登录账号",readonly:""},model:{value:e.dataForm.loginAcc,callback:function(a){e.$set(e.dataForm,"loginAcc",a)},expression:"dataForm.loginAcc"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"密码：",prop:e.dataForm.id?"":"pwd"}},[t("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.dataForm.pwd,callback:function(a){e.$set(e.dataForm,"pwd",a)},expression:"dataForm.pwd"}})],1),e._v(" "),t("h3",[e._v("代理商级别")]),e._v(" "),t("el-form-item",{attrs:{label:"代理级别：",prop:"agencylevel"}},[t("el-select",{attrs:{placeholder:"请选择代理级别"},on:{change:function(a){e.changeLevel(e.dataForm.agencylevel)}},model:{value:e.dataForm.agencylevel,callback:function(a){e.$set(e.dataForm,"agencylevel",a)},expression:"dataForm.agencylevel"}},e._l(e.agencylevelArr,function(e,a){return t("el-option",{key:a,attrs:{value:e.id,label:e.name}})}))],1),e._v(" "),t("el-form-item",{attrs:{label:"单价：",prop:"price"}},[t("el-input",{attrs:{placeholder:"单价"},model:{value:e.dataForm.price,callback:function(a){e.$set(e.dataForm,"price",a)},expression:"dataForm.price"}}),e._v(" "),t("span",[e._v("元/条")])],1),e._v(" "),t("el-form-item",{attrs:{label:"预警条数 ：",prop:"allowCounts"}},[t("el-input",{attrs:{placeholder:"空号预警条数 "},model:{value:e.dataForm.allowCounts,callback:function(a){e.$set(e.dataForm,"allowCounts",a)},expression:"dataForm.allowCounts"}}),e._v(" "),t("span",[e._v("条")])],1)],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.clearAgent()}}},[e._v("取消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.dataFormSubmit()}}},[e._v("确定")])],1)],1)},staticRenderFns:[]};var m=t("46Yf")(d,c,!1,function(e){t("QguD")},null,null);a.default=m.exports},"4Ayh":function(e,a,t){(e.exports=t("acE3")(!1)).push([e.i,"\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409EFF;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 100px;\n  height: 100px;\n  line-height: 100px;\n  text-align: center;\n}\n.avatar {\n  width: 100px;\n  height: 100px;\n  display: block;\n}\n#agentNumberCss .el-input__inner {\n  border: none;\n}\n",""])},"5Q/c":function(e,a,t){var r=t("YR/3");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);t("XkoO")("2dde9b5f",r,!0)},AnTv:function(e,a,t){(e.exports=t("acE3")(!1)).push([e.i,"\n.topSearch {\n  width: 100%;\n  padding: 10px 23px 20px;\n  background-color: #ffffff;\n  margin-bottom: 24px;\n  -webkit-box-shadow: 0px 7px 9px 0px rgba(153, 153, 153, 0.05);\n          box-shadow: 0px 7px 9px 0px rgba(153, 153, 153, 0.05);\n}\n",""])},E6eT:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("A+mb"),o={data:function(){return{dialogVisible:!1,labelPosition:"right",seeImageUrl:"",dataForm:{id:0,businNumber:"",companyName:"",bussicAdress:"",lawName:"",businNum:"",busindate1:"",busindate2:"",username:"",mobile:"",email:"",work:"",loginAcc:"",pwd:"",agencylevel:"",price:"",allowCounts:""}}},methods:{showInit:function(e){var a=this;this.dialogVisible=!0,this.dataForm.id=e,this.$http({url:this.$http.adornUrl("agent/agentInfo/detail?token="+this.$cookie.get("token")+"&agentId="+this.dataForm.id),method:"get",params:this.$http.adornParams()}).then(function(e){var t=e.data;t&&0===t.code&&(a.seeImageUrl=r.a.imgUrl+t.data.licenseUrl,a.dataForm.businNumber=t.data.mchId,a.dataForm.companyName=t.data.companyName,a.dataForm.bussicAdress=t.data.address,a.dataForm.lawName=t.data.legalPerson,a.dataForm.businNum=t.data.licenseNo,a.dataForm.busindate1=t.data.effectDate,a.dataForm.busindate2=t.data.expireDate,a.dataForm.username=t.data.contactName,a.dataForm.mobile=t.data.mobile,a.dataForm.email=t.data.email,a.dataForm.work=t.data.position,a.dataForm.loginAcc=t.data.mobile,a.dataForm.agencylevel=t.data.levelId,a.dataForm.price=t.data.price,a.dataForm.allowCounts=t.data.emptyWarnNumber)})}}},l={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{attrs:{id:"seeAgent"}},[t("el-dialog",{attrs:{title:"查看",visible:e.dialogVisible,width:"52%"},on:{"update:visible":function(a){e.dialogVisible=a}}},[t("el-form",{ref:"dataForm",staticClass:"demo-ruleForm",attrs:{model:e.dataForm,"label-width":"150px","label-position":e.labelPosition}},[t("el-form-item",{attrs:{label:"营业执照："}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,disabled:""}},[e.seeImageUrl?t("img",{staticClass:"avatar",attrs:{src:e.seeImageUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),t("el-form-item",{attrs:{label:"商户编号："}},[t("el-input",{attrs:{placeholder:"商户编号",readonly:""},model:{value:e.dataForm.businNumber,callback:function(a){e.$set(e.dataForm,"businNumber",a)},expression:"dataForm.businNumber"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"公司名称："}},[t("el-input",{attrs:{placeholder:"公司名称",readonly:""},model:{value:e.dataForm.companyName,callback:function(a){e.$set(e.dataForm,"companyName",a)},expression:"dataForm.companyName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"营业执照所在地："}},[t("el-input",{attrs:{placeholder:"营业执照所在地",readonly:""},model:{value:e.dataForm.bussicAdress,callback:function(a){e.$set(e.dataForm,"bussicAdress",a)},expression:"dataForm.bussicAdress"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"法人姓名："}},[t("el-input",{attrs:{placeholder:"法人姓名",readonly:""},model:{value:e.dataForm.lawName,callback:function(a){e.$set(e.dataForm,"lawName",a)},expression:"dataForm.lawName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"营业执照号："}},[t("el-input",{attrs:{placeholder:"营业执照号",readonly:""},model:{value:e.dataForm.businNum,callback:function(a){e.$set(e.dataForm,"businNum",a)},expression:"dataForm.businNum"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"营业期限："}},[t("el-input",{staticStyle:{width:"35%"},attrs:{placeholder:"营业执照号",readonly:""},model:{value:e.dataForm.busindate1,callback:function(a){e.$set(e.dataForm,"busindate1",a)},expression:"dataForm.busindate1"}}),e._v("至\n                "),t("el-input",{staticStyle:{width:"35%"},attrs:{placeholder:"营业执照号",readonly:""},model:{value:e.dataForm.busindate2,callback:function(a){e.$set(e.dataForm,"busindate2",a)},expression:"dataForm.busindate2"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"联系人姓名："}},[t("el-input",{attrs:{placeholder:"联系人姓名",readonly:""},model:{value:e.dataForm.username,callback:function(a){e.$set(e.dataForm,"username",a)},expression:"dataForm.username"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"联系人手机号："}},[t("el-input",{attrs:{placeholder:"联系人手机号",readonly:""},model:{value:e.dataForm.mobile,callback:function(a){e.$set(e.dataForm,"mobile",a)},expression:"dataForm.mobile"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"联系人邮箱："}},[t("el-input",{attrs:{placeholder:"联系人邮箱",readonly:""},model:{value:e.dataForm.email,callback:function(a){e.$set(e.dataForm,"email",a)},expression:"dataForm.email"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"职务："}},[t("el-input",{attrs:{placeholder:"职务",readonly:""},model:{value:e.dataForm.work,callback:function(a){e.$set(e.dataForm,"work",a)},expression:"dataForm.work"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"登录账号："}},[t("el-input",{attrs:{placeholder:"登录账号",readonly:""},model:{value:e.dataForm.loginAcc,callback:function(a){e.$set(e.dataForm,"loginAcc",a)},expression:"dataForm.loginAcc"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"代理级别："}},[t("el-input",{attrs:{placeholder:"代理级别",readonly:""},model:{value:e.dataForm.agencylevel,callback:function(a){e.$set(e.dataForm,"agencylevel",a)},expression:"dataForm.agencylevel"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"单价："}},[t("el-input",{attrs:{placeholder:"单价",readonly:""},model:{value:e.dataForm.price,callback:function(a){e.$set(e.dataForm,"price",a)},expression:"dataForm.price"}}),e._v(" "),t("span",[e._v("元/条")])],1),e._v(" "),t("el-form-item",{attrs:{label:"预警条数："}},[t("el-input",{attrs:{placeholder:"预警条数",readonly:""},model:{value:e.dataForm.allowCounts,callback:function(a){e.$set(e.dataForm,"allowCounts",a)},expression:"dataForm.allowCounts"}}),e._v(" "),t("span",[e._v("条")])],1)],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.dialogVisible=!1}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var i=t("46Yf")(o,l,!1,function(e){t("5Q/c")},null,null);a.default=i.exports},MQXM:function(e,a,t){var r=t("AnTv");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);t("XkoO")("e7110fbe",r,!0)},QguD:function(e,a,t){var r=t("4Ayh");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);t("XkoO")("40d89248",r,!0)},"YR/3":function(e,a,t){(e.exports=t("acE3")(!1)).push([e.i,"\n#seeAgent .el-input__inner {\n    border: none !important;\n}\n",""])},goss:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("3Big"),o=t("E6eT"),l={data:function(){return{account:"",cdAgentId:"",jinorQiId:"",disabled:!1,agentseeVisible:!1,jinShow:!1,qiShow:!1,disableTitlt:"",disableVisible:!1,addSeeUpdateVisible:!1,searchData:{dateTime:[],agentName:"",status:"",mobile:""},formInline:{user:"",region:""},agentTableData:[],pageIndex:1,pageSize:10,totalPage:0,dataListLoading:!1,chdataFormVisible:!1,chdataForm:{accnumber:"",chPrice:"",chCounts:"",type:"",chMoney:"",remark:""},chdataFormrefRule:{chPrice:[{required:!0,message:"请输入单价",trigger:"blur"},{type:"number",message:"金额必须为数字"}],chMoney:[{required:!0,message:"请输入金额",trigger:"blur"},{type:"number",message:"金额必须为数字"}],chCounts:[{required:!0,message:"请输入条数",trigger:"blur"},{type:"number",message:"条数必须为数字"}],type:[{required:!0,message:"请选择入账类型",trigger:"blur"}]},pickerOptions0:{disabledDate:function(e){return e.getTime()>Date.now()-864e4}}}},watch:{"chdataForm.chMoney":function(){""!==this.chdataForm.chMoney&&""!==this.chdataForm.chPrice?this.chdataForm.chCounts=Math.ceil(Number(this.chdataForm.chMoney)/this.chdataForm.chPrice):this.chdataForm.chCounts=""}},components:{AddOrUpdate:r.default,seeDiaData:o.default},activated:function(){this.getDataList()},methods:{getDataList:function(){var e=this;this.dataListLoading=!0,this.$http({url:this.$http.adornUrl("agent/agentInfo/list?token="+this.$cookie.get("token")),method:"get",params:this.$http.adornParams({currentPage:this.pageIndex,pageSize:this.pageSize,companyName:this.searchData.agentName,status:this.searchData.status,mobile:this.searchData.mobile,startTime:null==this.searchData.dateTime?"":this.searchData.dateTime[0],endTime:null==this.searchData.dateTime?"":this.searchData.dateTime[1]})}).then(function(a){var t=a.data;t&&0===t.code?(e.agentTableData=t.data.list,e.totalPage=t.data.total,0==t.data.list.length?e.disabled=!0:e.disabled=!1):(e.agentTableData=[],e.totalPage=0),e.dataListLoading=!1})},sizeChangeHandle:function(e){this.pageSize=e,this.pageIndex=1,this.getDataList()},currentChangeHandle:function(e){this.pageIndex=e,this.getDataList()},getRowClass:function(e){e.row,e.column;var a=e.rowIndex;e.columnIndex;return 0==a?"background-color: #f8f8f8;color:#666;":""},closeDialogjq:function(){this.jinShow=!1,this.qiShow=!1},exporTable:function(){var e=void 0,a=void 0;null==this.searchData.dateTime?(e="",a=""):0==this.searchData.dateTime.length?(e="",a=""):(e=this.searchData.dateTime[0],a=this.searchData.dateTime[1]),window.open(this.$http.adornUrl("agent/agentInfo/list/export?token="+this.$cookie.get("token")+"&currentPage="+this.pageIndex+"&pageSize="+this.pageSize+"&companyName="+this.searchData.agentName+"&status="+this.searchData.status+"&mobile="+this.searchData.mobile+"&startTime="+e+"&endTime="+a))},addUpdateAgent:function(e){var a=this;this.addSeeUpdateVisible=!0,this.$nextTick(function(){a.$refs.addOrUpdate.showInit(e)})},seeClick:function(e){var a=this;this.agentseeVisible=!0,this.$nextTick(function(){a.$refs.agentseecon.showInit(e)})},chdataBtn:function(e,a,t){var r=this;this.chdataFormVisible=!0,this.cdAgentId=e,this.chdataForm.accnumber=a,this.chdataForm.chPrice=t,this.$nextTick(function(){r.$refs.chdataFormref.resetFields()})},disableAndEnabled:function(e){this.account=e.companyName,this.jinorQiId=e.agentId,1==e.status?(this.disableTitlt="禁用",this.jinShow=!0):0==e.status&&(this.disableTitlt="启用",this.qiShow=!0),this.disableVisible=!0},ddd:function(){var e=this;"禁用"==this.disableTitlt?this.$http({url:this.$http.adornUrl("agent/agentInfo/pause?token="+this.$cookie.get("token")),method:"post",params:this.$http.adornParams({agentId:this.jinorQiId})}).then(function(a){var t=a.data;t&&0===t.code?(e.disableVisible=!1,e.jinShow=!1,e.qiShow=!1,e.getDataList()):e.$message.error(t.msg)}):"启用"==this.disableTitlt&&this.$http({url:this.$http.adornUrl("agent/agentInfo/resume?token="+this.$cookie.get("token")),method:"post",params:this.$http.adornParams({agentId:this.jinorQiId})}).then(function(a){var t=a.data;t&&0===t.code?(e.disableVisible=!1,e.qiShow=!1,e.jinShow=!1,e.getDataList()):e.$message.error(t.msg)})},chsubmit:function(){var e=this;this.$refs.chdataFormref.validate(function(a){a&&e.$http({url:e.$http.adornUrl("agent/agentInfo/recharge?token="+e.$cookie.get("token")),method:"post",params:e.$http.adornParams({agentId:e.cdAgentId,price:e.chdataForm.chPrice,number:e.chdataForm.chCounts,money:e.chdataForm.chMoney,payType:e.chdataForm.type})}).then(function(a){var t=a.data;t&&0===t.code?e.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){e.chdataFormVisible=!1,e.getDataList()}}):e.$message.error(t.msg)})})}}},i={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"main"},[t("div",{staticClass:"topSearch"},[t("h2",[e._v("OEM列表")]),e._v(" "),t("el-form",{attrs:{inline:!0,model:e.searchData}},[t("el-form-item",{attrs:{label:"创建时间："}},[t("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions0},model:{value:e.searchData.dateTime,callback:function(a){e.$set(e.searchData,"dateTime",a)},expression:"searchData.dateTime"}})],1),e._v(" "),t("el-form-item",{staticStyle:{"margin-left":"25px"},attrs:{label:"代理商名称："}},[t("el-input",{attrs:{placeholder:"代理商名称",clearable:""},model:{value:e.searchData.agentName,callback:function(a){e.$set(e.searchData,"agentName",a)},expression:"searchData.agentName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"手机号："}},[t("el-input",{attrs:{placeholder:"手机号",clearable:""},model:{value:e.searchData.mobile,callback:function(a){e.$set(e.searchData,"mobile",a)},expression:"searchData.mobile"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"代理商状态："}},[t("el-select",{attrs:{placeholder:"代理商状态"},model:{value:e.searchData.status,callback:function(a){e.$set(e.searchData,"status",a)},expression:"searchData.status"}},[t("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),t("el-option",{attrs:{label:"已禁用",value:"0"}}),e._v(" "),t("el-option",{attrs:{label:"使用中",value:"1"}})],1)],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.getDataList()}}},[e._v("查询")]),e._v(" "),t("el-button",{attrs:{type:"primary",disabled:e.disabled},on:{click:e.exporTable}},[e._v("导出")]),e._v(" "),e.isAuth("sys:user:save")?t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.addUpdateAgent()}}},[e._v("新增代理商")]):e._e()],1)],1)],1),e._v(" "),t("div",{staticClass:"agentTable"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{data:e.agentTableData,"header-cell-style":e.getRowClass}},[t("el-table-column",{attrs:{type:"index","header-align":"center",align:"center",width:"80",fixed:"",label:"序号"}}),e._v(" "),t("el-table-column",{attrs:{prop:"mchId",label:" 商户编号",width:"80",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"companyName",label:" 代理商名称",width:"165",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"statusName",label:" 代理商状态",width:"90",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"150",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"canUpgradeName",label:"能否升级",width:"80",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"levelName",label:"代理等级",width:"120",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"totalRechargeMoney",label:"充值总计（元）",width:"120",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"totalRechargeNumber",label:"充值总条数",width:"120",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"emptyBalance",label:"剩余条数",width:"120",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"emptyWarnNumber",label:"预警条数",width:"120",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"mobile",label:"联系电话",width:"120",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"165",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.seeClick(a.row.agentId)}}},[e._v("查看")]),e._v(" "),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.addUpdateAgent(a.row.agentId)}}},[e._v("修改")]),e._v(" "),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.chdataBtn(a.row.agentId,a.row.companyName,a.row.price)}}},[e._v("充值")]),e._v(" "),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.disableAndEnabled(a.row)}}},[e._v(e._s(0==a.row.status?"启用":"禁用"))])]}}])})],1)],1),e._v(" "),t("div",{staticClass:"agentPage"},[t("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[10,20,30,50],"page-size":e.pageSize,total:e.totalPage,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChangeHandle,"current-change":e.currentChangeHandle}})],1),e._v(" "),t("el-dialog",{attrs:{title:"充值",visible:e.chdataFormVisible},on:{"update:visible":function(a){e.chdataFormVisible=a}}},[t("el-form",{ref:"chdataFormref",attrs:{model:e.chdataForm,rules:e.chdataFormrefRule,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"充值账号"}},[t("el-input",{staticStyle:{border:"none"},attrs:{placeholder:"",readonly:"",id:"chprice"},model:{value:e.chdataForm.accnumber,callback:function(a){e.$set(e.chdataForm,"accnumber",a)},expression:"chdataForm.accnumber"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"充值单价",prop:"chPrice"}},[t("el-input",{attrs:{placeholder:"输入充值单价，自动计算条数"},model:{value:e.chdataForm.chPrice,callback:function(a){e.$set(e.chdataForm,"chPrice",e._n(a))},expression:"chdataForm.chPrice"}}),e._v(" "),t("span",[e._v("元/条")])],1),e._v(" "),t("el-form-item",{attrs:{label:"充值金额",prop:"chMoney"}},[t("el-input",{attrs:{placeholder:"输入充值金额，自动计算条数"},model:{value:e.chdataForm.chMoney,callback:function(a){e.$set(e.chdataForm,"chMoney",e._n(a))},expression:"chdataForm.chMoney"}}),e._v(" "),t("span",[e._v("元")])],1),e._v(" "),t("el-form-item",{attrs:{label:"充值条数",prop:"chCounts"}},[t("el-input",{attrs:{placeholder:"请输入充值条数",readonly:""},model:{value:e.chdataForm.chCounts,callback:function(a){e.$set(e.chdataForm,"chCounts",e._n(a))},expression:"chdataForm.chCounts"}}),e._v(" "),t("span",[e._v("条")])],1),e._v(" "),t("el-form-item",{attrs:{label:"入账类型",prop:"type"}},[t("el-select",{attrs:{placeholder:"入账类型"},model:{value:e.chdataForm.type,callback:function(a){e.$set(e.chdataForm,"type",a)},expression:"chdataForm.type"}},[t("el-option",{attrs:{label:"支付宝",value:"1"}}),e._v(" "),t("el-option",{attrs:{label:"对公转账",value:"5"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"备注",prop:"remark"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入备注..."},model:{value:e.chdataForm.remark,callback:function(a){e.$set(e.chdataForm,"remark",a)},expression:"chdataForm.remark"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.chdataFormVisible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.chsubmit}},[e._v("确 定")])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:e.disableTitlt,visible:e.disableVisible,width:"30%"},on:{"update:visible":function(a){e.disableVisible=a},close:e.closeDialogjq}},[t("p",{directives:[{name:"show",rawName:"v-show",value:e.jinShow,expression:"jinShow"}],staticClass:"hideCON"},[e._v("您将禁用账号"+e._s(e.account)+"，禁用后该账户将不可登录该系统")]),e._v(" "),t("p",{directives:[{name:"show",rawName:"v-show",value:e.qiShow,expression:"qiShow"}],staticClass:"hideCON"},[e._v("您将启用账号"+e._s(e.account)+"，启用后该账户将恢复正常使用。")]),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.disableVisible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.ddd}},[e._v("确 定")])],1)]),e._v(" "),e.addSeeUpdateVisible?t("add-or-update",{ref:"addOrUpdate",on:{refreshDataList:e.getDataList}}):e._e(),e._v(" "),e.agentseeVisible?t("see-dia-data",{ref:"agentseecon"}):e._e()],1)},staticRenderFns:[]};var s=t("46Yf")(l,i,!1,function(e){t("MQXM")},null,null);a.default=s.exports}});