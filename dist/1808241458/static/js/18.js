webpackJsonp([18],{"1I+B":function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={data:function(){return{refundVisible:!1,labelPosition:"right",refundDataForm:{mobile:"",custNanme:"",refunCounts:"",refunNumber:"",refunPrice:"",refunMoney:"",desc:""},refunddatarules:{mobile:[{required:!0,message:"请输入手机号",trigger:"blur"}],custNanme:[{required:!0,message:"请输入客户名称",trigger:"blur"}],refunCounts:[{required:!0,message:"请输入剩余条数",trigger:"blur"}],refunNumber:[{required:!0,message:"请输入退款条数",trigger:"blur"}],refunPrice:[{required:!0,message:"请输入单价",trigger:"blur"}],refunMoney:[{required:!0,message:"根据条数和单价，自动计算退款金额",trigger:"blur"}]}}},watch:{refundDataForm:{handler:function(e,r){""!==this.refundDataForm.refunNumber&&""!==this.refundDataForm.refunPrice?this.refundDataForm.refunMoney=Number(this.refundDataForm.refunNumber)*this.refundDataForm.refunPrice:this.refundDataForm.refunMoney="",this.refundDataForm.refunNumber>this.refundDataForm.refunCounts&&this.$message.error("退款条数不能大于剩余条数")},deep:!0}},methods:{packagePro:function(){var e=this;this.$http({url:this.$http.adornUrl("agent/cust/getCustInfo?token="+this.$cookie.get("token")),method:"post",params:this.$http.adornParams({creUserId:this.refundDataForm.creUserId,custName:this.refundDataForm.userName})}).then(function(r){var t=r.data;t&&0===t.code?(e.refundDataForm.mobile=t.data.mobile,e.refundDataForm.custNanme=t.data.custName,e.refundDataForm.refunCounts=t.data.account):e.$message.error(t.msg)})},refundInit:function(e){var r=this;this.refundDataForm.creUserId=e[2],this.refundDataForm.userName=e[3],0==e[1]||e[1],this.refundVisible=!0,this.packagePro(),this.$nextTick(function(){r.$refs.refundDataFormRef.resetFields()})},refundDataFormTrue:function(){var e=this;this.$refs.refundDataFormRef.validate(function(r){r&&e.$http({url:e.$http.adornUrl("agent/cust/refunds?token="+e.$cookie.get("token")),method:"post",params:e.$http.adornParams({creUserId:e.refundDataForm.creUserId,number:e.refundDataForm.refunNumber,amount:e.refundDataForm.refunMoney,remark:e.refundDataForm.desc})}).then(function(r){var t=r.data;t&&0===t.code?e.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){e.refundVisible=!1,e.$emit("refreshDataList")}}):e.$message.error(t.msg)})})}}},n={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("el-dialog",{attrs:{title:"退款",visible:e.refundVisible,width:"52%"},on:{"update:visible":function(r){e.refundVisible=r}}},[t("el-form",{ref:"refundDataFormRef",attrs:{model:e.refundDataForm,rules:e.refunddatarules,"label-width":"150px","label-position":e.labelPosition}},[t("el-form-item",{attrs:{label:"手机号码：",prop:"mobile"}},[t("el-input",{attrs:{placeholder:"手机号码",id:"mobile",readonly:""},model:{value:e.refundDataForm.mobile,callback:function(r){e.$set(e.refundDataForm,"mobile",r)},expression:"refundDataForm.mobile"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"客户名称：",prop:"custNanme"}},[t("el-input",{attrs:{placeholder:"客户名称",id:"custNanme",readonly:""},model:{value:e.refundDataForm.custNanme,callback:function(r){e.$set(e.refundDataForm,"custNanme",r)},expression:"refundDataForm.custNanme"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"剩余条数：",prop:"refunCounts"}},[t("el-input",{attrs:{placeholder:"剩余条数",id:"refunCounts",readonly:""},model:{value:e.refundDataForm.refunCounts,callback:function(r){e.$set(e.refundDataForm,"refunCounts",r)},expression:"refundDataForm.refunCounts"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"退款条数：",prop:"refunNumber"}},[t("el-input",{attrs:{placeholder:"退款条数不能大于剩余条数"},model:{value:e.refundDataForm.refunNumber,callback:function(r){e.$set(e.refundDataForm,"refunNumber",r)},expression:"refundDataForm.refunNumber"}}),e._v(" "),t("span",[e._v("条")])],1),e._v(" "),t("el-form-item",{attrs:{label:"单价：",prop:"refunPrice"}},[t("el-input",{attrs:{placeholder:"单价"},model:{value:e.refundDataForm.refunPrice,callback:function(r){e.$set(e.refundDataForm,"refunPrice",r)},expression:"refundDataForm.refunPrice"}}),e._v(" "),t("span",[e._v("元/条")])],1),e._v(" "),t("el-form-item",{attrs:{label:"退款金额：",prop:"refunMoney"}},[t("el-input",{attrs:{placeholder:"根据条数和单价，自动计算退款金额"},model:{value:e.refundDataForm.refunMoney,callback:function(r){e.$set(e.refundDataForm,"refunMoney",r)},expression:"refundDataForm.refunMoney"}}),e._v(" "),t("span",[e._v("元")])],1),e._v(" "),t("el-form-item",{attrs:{label:"备注：",prop:"desc"}},[t("el-input",{attrs:{type:"textarea",placeholder:"备注..."},model:{value:e.refundDataForm.desc,callback:function(r){e.$set(e.refundDataForm,"desc",r)},expression:"refundDataForm.desc"}})],1)],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(r){e.refundVisible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.refundDataFormTrue}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var u=t("46Yf")(a,n,!1,function(e){t("g4w8")},null,null);r.default=u.exports},SCSz:function(e,r,t){(e.exports=t("acE3")(!1)).push([e.i,"\n#mobile,\n#custNanme,\n#refunCounts {\n    border: none\n}\n",""])},g4w8:function(e,r,t){var a=t("SCSz");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("XkoO")("e001fb5e",a,!0)}});