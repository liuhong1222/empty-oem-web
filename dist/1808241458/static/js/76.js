webpackJsonp([76],{oJg9:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={data:function(){return{dataForm:{name:"",companyName:"",accNo:"",oldBalance:null,balance:null,phoneNum:"",remark:"",type:""}}},methods:{querySearch:function(a,t){this.dataForm.accNo="",this.dataForm.phoneNum="",this.dataForm.companyName="",this.dataForm.oldBalance=null,this.dataForm.type=null,this.$http({url:this.$http.adornUrl("/biz/balance/account"),method:"get",params:this.$http.adornParams({name:this.dataForm.name})}).then(function(a){var e=a.data;if(e&&0===e.code&&e.data){for(var r=0;r<e.data.length;r++)e.data[r].value=e.data[r].companyName;console.log(e.data),t(e.data)}})},handleSelect:function(a){var t=this;this.dataForm.accNo=a.accNo,this.dataForm.phoneNum=a.phoneNum,this.dataForm.companyName=a.companyName,this.$http({url:this.$http.adornUrl("/biz/balance"),method:"get",params:this.$http.adornParams({accNo:a.accNo})}).then(function(a){var e=a.data;e&&0===e.code&&e.data&&(t.dataForm.oldBalance=e.data)})},modifyBalance:function(a){var t=this;this.dataForm.balance<="0"?this.$message.error("请输入大于0的值"):""!==this.dataForm.remark?this.$confirm("确认要执行吗？").then(function(e){t.dataForm.type=a,t.modify()}).catch(function(a){}):this.$message.error("请输入备注")},modify:function(){var a=this;this.$http({url:this.$http.adornUrl("/biz/balance"),method:"put",params:this.$http.adornParams({accNo:this.dataForm.accNo,balance:this.dataForm.balance,remark:this.dataForm.remark,type:this.dataForm.type})}).then(function(t){var e=t.data;e&&0===e.code?(a.dataForm.balance=null,a.dataForm.remark="",a.$message({message:"余额调整成功",type:"success"}),a.$http({url:a.$http.adornUrl("/biz/balance"),method:"get",params:a.$http.adornParams({accNo:a.dataForm.accNo})}).then(function(t){var e=t.data;e&&0===e.code&&e.data&&(a.dataForm.oldBalance=e.data)})):a.$message.error("余额调整失败，"+e.msg)})}}},o={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("el-form",{attrs:{inline:!0,model:a.dataForm,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"搜索账户"}},[e("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":a.querySearch,placeholder:"请输入电话、名称或编号","trigger-on-focus":!1},on:{select:a.handleSelect},model:{value:a.dataForm.name,callback:function(t){a.$set(a.dataForm,"name",t)},expression:"dataForm.name"}})],1),a._v(" "),e("br"),a._v(" "),e("el-form-item",{attrs:{label:"账户编号"}},[a._v("\n\t\t\t\t\t"+a._s(a.dataForm.accNo||"-")+"\n      ")]),e("br"),a._v(" "),e("el-form-item",{attrs:{label:"企业名称"}},[a._v("\n\t\t\t\t\t"+a._s(a.dataForm.companyName||"-")+"\n      ")]),e("br"),a._v(" "),e("el-form-item",{attrs:{label:"联系电话"}},[a._v("\n\t\t\t\t\t"+a._s(a.dataForm.phoneNum||"-")+"\n      ")]),e("br"),a._v(" "),e("el-form-item",{attrs:{label:"当前余额(元)"}},[a._v("\n\t\t\t\t\t"+a._s(a.dataForm.oldBalance||"-")+"\n      ")]),e("br"),a._v(" "),e("el-form-item",{attrs:{label:"增减余额(元)"}},[e("el-input",{attrs:{placeholder:"调整值",clearable:""},model:{value:a.dataForm.balance,callback:function(t){a.$set(a.dataForm,"balance",t)},expression:"dataForm.balance"}})],1),e("br"),a._v(" "),e("el-form-item",{attrs:{label:"备注"}},[e("el-input",{attrs:{placeholder:"请输入本次操作备注",type:"textarea",clearable:""},model:{value:a.dataForm.remark,callback:function(t){a.$set(a.dataForm,"remark",t)},expression:"dataForm.remark"}})],1),e("br"),a._v(" "),e("el-form-item",[a.isAuth("biz:balance:save")?e("el-button",{staticStyle:{"margin-left":"50px"},attrs:{type:"primary",disabled:""==this.dataForm.accNo||null==this.dataForm.balance},on:{click:function(t){a.modifyBalance(1)}}},[a._v("紧急充值")]):a._e(),a._v(" "),a.isAuth("biz:balance:save")?e("el-button",{attrs:{type:"danger",disabled:""==this.dataForm.accNo||null==this.dataForm.balance},on:{click:function(t){a.modifyBalance(2)}}},[a._v("减少余额")]):a._e()],1)],1)},staticRenderFns:[]},n=e("46Yf")(r,o,!1,null,null,null);t.default=n.exports}});