webpackJsonp([55],{Tf3B:function(e,t,a){(e.exports=a("acE3")(!1)).push([e.i,"\nh4[data-v-73131a87] {\r\n  display: inline-block;\n}\nspan[data-v-73131a87] {\r\n  padding: 0 15px;\n}\r\n",""])},nOym:function(e,t,a){var i=a("Tf3B");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("XkoO")("e88bfb90",i,!0)},oNd1:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("zsLt"),s=a.n(i),n=a("kfHR"),l=a.n(n),r=a("3cXf"),o=a.n(r),c={data:function(){return{visible:!1,disabled:!0,dataForm:{accountId:null,productName:null,bizTypeName:null,page:1,size:10},changePriceDisabled:!1,defaultValue:null,message:"",pageIndex:1,dataList:[],allList:[{value:"productName",message:"产品名称\t"},{value:"interfaceName",message:"接口名称"}],totalPage:void 0,dataListLoading:!1,dataListSelections:[],addOrUpdateVisible:!1,inputDisabledValue:"",paramsOneName:"",allListMessage:"产品名称",select:"产品名称",DivId:null,pageDisabled:!1,submitForm:!0,dataPriceList:{accountId:null,priceList:null},inputValue:null,changeList:[],dataListPriceId:null}},created:function(){this.getDataList(),this.changePriceDisabled=!1},methods:{init:function(e){var t=e.accountId;console.log(t),this.dataForm.accountId=t,this.dataPriceList.accountId=t,this.visible=!0,this.getDataList()},getDataList:function(){var e=this;this.dataListLoading=!0,this.$http({url:this.$http.adornUrl("/biz/account/product/list"),method:"get",params:this.$http.adornParams(this.dataForm)}).then(function(t){var a=t.data;a&&0===a.code?(e.dataList=a.page.list,e.totalPage=a.page.totalCount):(e.dataList=[],e.dataForm.totalPage=0),e.dataListLoading=!1})},chooseSelect:function(e){var t=this,a=e;return this.$data.allList.forEach(function(e){var i=e.message,s=e.value;i==a&&(t.dataForm={page:1,size:10},t.paramsOneName=s)}),this.inputDisabledValue="",this.dataForm={page:1,size:10},this.allListMessage=a},inputDisabledValueFn:function(e){""===this.paramsOneName?(this.dataForm.productName=this.inputDisabledValue,this.getDataList()):"productName"===this.paramsOneName?this.dataForm.productName=this.inputDisabledValue:"interfaceName"===this.paramsOneName&&(this.dataForm.bizTypeName=this.inputDisabledValue)},handleFilter:function(){this.inputDisabledValue,this.dataForm.accountId=this.dataPriceList.accountId,this.getDataList()},filterChange:function(e){},filterTag:function(e,t){return t.joinStatus===e},sizeChangeHandle:function(e){this.dataForm.size=e,this.dataForm.page=1,this.getDataList()},currentChangeHandle:function(e){this.dataForm.page=e,this.getDataList()},changeData:function(e){var t=e.order,a=e.prop;"descending"===t?(this.dataForm.ascFlg=!1,this.dataForm.orderCol=a,this.getDataList()):"ascending"===t?(this.dataForm.ascFlg=!0,this.dataForm.orderCol=a,this.getDataList()):(this.dataForm.ascFlg=null,this.dataForm.orderCol=null,this.getDataList())},changePrice:function(e){this.disabled=!1,this.changePriceDisabled=!0,this.submitForm=!1,this.pageDisabled=!0},changePriceSuccess:function(){var e=this;if(this.dataListPriceId)if(0==this.dataListPriceId.length)this.disabled=!0,this.submitForm=!0,this.pageDisabled=!1;else{var t=[];this.dataListPriceId.forEach(function(e){var a=sessionStorage.getItem(e);t.push(JSON.parse(a))});var a=[];t.forEach(function(e,i){null===e?t.splice(i,1):a.push(e)}),this.dataPriceList.priceList=o()(a),this.submitForm=!0,this.disabled=!0,this.pageDisabled=!1,this.$http({url:this.$http.adornUrl("/biz/account/product/batchUpdatePrice"),method:"post",data:this.$http.adornData(this.dataPriceList)}).then(function(t){var a=t.data;a&&0===a.code?e.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){e.visible=!1,e.changePriceDisabled=!1,e.$emit("refreshDataList"),e.dataListPriceId.forEach(function(e){sessionStorage.removeItem(e)}),e.dataListPriceId=[]}}):(e.$message.error(a.msg),e.dataListPriceId.forEach(function(e){sessionStorage.removeItem(e)})),e.dataListLoading=!1})}else this.disabled=!0,this.submitForm=!0,this.pageDisabled=!1;this.changePriceDisabled=!1},changeValue:function(e){var t=e.lowestPrice,a=e.productCode,i=e.bizTypeCode,n=e.chargeMethod,r=e.fee,c=event.currentTarget.value;if(c>t){this.message="",this.DivId=i,this.submitForm=!1,this.changeList.push(""+i),this.dataListPriceId=l()(new s.a(this.changeList));var d={productCode:a,bizTypeCode:i,chargeMethod:n,fee:r};sessionStorage.setItem(""+i,o()(d));sessionStorage.getItem(""+i);var u=[];this.dataListPriceId.forEach(function(e){var t=sessionStorage.getItem(""+i);u.push(t)})}else c===t?(this.message="请修改内容",this.DivId=i,this.submitForm=!0):(this.message="数值太小",this.submitForm=!0,this.DivId=i)},closeDialog:function(){this.disabled=!1,this.submitForm=!0},tableheaderClassName:function(e){e.row,e.rowIndex;return"table-head-th"}},watch:{}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"改价","close-on-click-modal":!1,visible:e.visible},on:{close:e.closeDialog,"update:visible":function(t){e.visible=t}}},[a("div",{staticClass:"mod-user"},[a("el-form",{attrs:{inline:!0,model:e.dataForm},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.getDataList()}}},[a("el-form-item",[a("el-select",{staticClass:"filter-item",staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"产品名称"},on:{change:e.chooseSelect},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},e._l(e.allList,function(e){return a("el-option",{key:e.message,attrs:{label:e.message,value:e.message}})}))],1),e._v(" "),a("el-form-item",[a("el-input",{staticStyle:{width:"230px"},attrs:{placeholder:e.allListMessage,clearable:""},on:{change:e.inputDisabledValueFn},model:{value:e.inputDisabledValue,callback:function(t){e.inputDisabledValue=t},expression:"inputDisabledValue"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleFilter}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:e.changePriceDisabled},on:{click:e.changePrice}},[e._v("修改价格")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:e.submitForm},on:{click:e.changePriceSuccess},model:{value:e.submitForm,callback:function(t){e.submitForm=t},expression:"submitForm"}},[e._v("完成")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataListLoading,expression:"dataListLoading"}],ref:"priceTable",staticStyle:{width:"100%",height:"100%"},attrs:{data:e.dataList,"header-cell-class-name":e.tableheaderClassName},on:{"filter-change":e.filterChange,"sort-change":e.changeData}},[a("el-table-column",{attrs:{prop:"productName","header-align":"center",align:"center",width:"150",label:"产品"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bizTypeName","header-align":"center",width:"150",align:"center",label:"接口"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cost","header-align":"center",align:"center",width:"120",label:"提成计算价格"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lowestPrice","header-align":"center",align:"center",width:"110",label:"最低售价"}}),e._v(" "),a("el-table-column",{attrs:{prop:"standardPrice",label:"默认售价",align:"center","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fee","header-align":"center",align:"center",width:"180",label:"当前售价"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{ref:"Form"},[a("el-form-item",[[a("el-input",{ref:"FormInput",staticClass:"input-number",attrs:{disabled:e.disabled,type:"number"},on:{change:function(a){e.changeValue(t.row)}},model:{value:t.row.fee,callback:function(a){e.$set(t.row,"fee",a)},expression:"scope.row.fee"}}),e._v(" "),e.DivId===t.row.bizTypeCode?a("div",{ref:"FormDiv",staticClass:"el-form-item__error"},[e._v(" "+e._s(e.message)+" ")]):e._e()]],2)],1)]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.dataForm.page,"page-sizes":[10,20,50,100],"page-size":e.dataForm.size,total:e.totalPage,disabled:e.pageDisabled,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChangeHandle,"current-change":e.currentChangeHandle}})],1)])},staticRenderFns:[]};var u=a("46Yf")(c,d,!1,function(e){a("nOym")},"data-v-73131a87",null);t.default=u.exports}});