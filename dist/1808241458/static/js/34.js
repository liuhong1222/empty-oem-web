webpackJsonp([34],{HZzk:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r={data:function(){return{roleName:null,dataListLoading:!1,disabled:!1,disableAgent:!0,disableAgentName:!0,customerSearchData:{dateTime:[],agentName:"",custName:"",custMobile:""},customerTableData:[],pageIndex:1,pageSize:10,totalPage:0,pickerOptions0:{disabledDate:function(e){return e.getTime()>Date.now()-864e4}}}},activated:function(){this.uerRechargeList()},methods:{uerRechargeList:function(){var e=this;"2"==sessionStorage.getItem("msjRoleName")&&(this.disableAgent=!1,this.disableAgentName=!1),this.dataListLoading=!0,this.$http({url:this.$http.adornUrl("agent/finance/user/recharge/list?token="+this.$cookie.get("token")),method:"get",params:this.$http.adornParams({currentPage:this.pageIndex,pageSize:this.pageSize,companyName:this.customerSearchData.agentName,userName:this.customerSearchData.custName,userMobile:this.customerSearchData.custMobile,startTime:null==this.customerSearchData.dateTime?"":this.customerSearchData.dateTime[0],endTime:null==this.customerSearchData.dateTime?"":this.customerSearchData.dateTime[1]})}).then(function(a){var t=a.data;t&&0===t.code?(e.customerTableData=t.data.list,e.totalPage=t.data.total,0==t.data.list.length?e.disabled=!0:e.disabled=!1):(e.customerTableData=[],e.totalPage=0),e.dataListLoading=!1})},sizeChangeHandle:function(e){this.pageSize=e,this.pageIndex=1,this.uerRechargeList()},currentChangeHandle:function(e){this.pageIndex=e,this.uerRechargeList()},getTotal:function(e){var a=e.columns,t=e.data,r=[];return a.forEach(function(e,a){if(0!==a){var l=t.map(function(a){return Number(a[e.property])});"number"===e.property||"money"===e.property?(r[a]=l.reduce(function(e,a){var t=Number(a);return isNaN(t)?e:e+a},0),"number"===e.property?r[a]+=" 条":"money"===e.property&&(r[a]+=" 元")):r[a]="--"}else r[a]="合计"}),r},getRowClass:function(e){e.row,e.column;var a=e.rowIndex;e.columnIndex;return 0==a?"background-color: #f8f8f8;color:#666;":""},regExport:function(){var e=void 0,a=void 0;null==this.customerSearchData.dateTime?(e="",a=""):0==this.customerSearchData.dateTime.length?(e="",a=""):(e=this.customerSearchData.dateTime[0],a=this.customerSearchData.dateTime[1]),window.open(this.$http.adornUrl("agent/finance/user/recharge/list/export?token="+this.$cookie.get("token")+"&currentPage="+this.pageIndex+"&pageSize="+this.pageSize+"&userName="+this.customerSearchData.custName+"&companyName="+this.customerSearchData.agentName+"&startTime="+e+"&endTime="+a))}}},l={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"main"},[t("div",{staticClass:"topSearch"},[t("h2",[e._v("客户充值明细记录")]),e._v(" "),t("el-form",{attrs:{inline:!0,model:e.customerSearchData}},[t("el-form-item",{attrs:{label:"创建时间："}},[t("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions0},model:{value:e.customerSearchData.dateTime,callback:function(a){e.$set(e.customerSearchData,"dateTime",a)},expression:"customerSearchData.dateTime"}})],1),e._v(" "),e.disableAgent?t("el-form-item",{staticStyle:{"margin-left":"5px"},attrs:{label:"代理商名称："}},[t("el-input",{attrs:{placeholder:"代理商名称",clearable:""},model:{value:e.customerSearchData.agentName,callback:function(a){e.$set(e.customerSearchData,"agentName",a)},expression:"customerSearchData.agentName"}})],1):e._e(),e._v(" "),t("el-form-item",{staticStyle:{"margin-left":"-2px"},attrs:{label:"客户名称："}},[t("el-input",{attrs:{placeholder:"客户名称",clearable:""},model:{value:e.customerSearchData.custName,callback:function(a){e.$set(e.customerSearchData,"custName",a)},expression:"customerSearchData.custName"}})],1),e._v(" "),t("el-form-item",{staticStyle:{"margin-left":"10px"},attrs:{label:"手机号："}},[t("el-input",{attrs:{placeholder:"手机号",clearable:""},model:{value:e.customerSearchData.custMobile,callback:function(a){e.$set(e.customerSearchData,"custMobile",a)},expression:"customerSearchData.custMobile"}})],1),e._v(" "),t("el-form-item",{staticStyle:{"margin-left":"6px"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.uerRechargeList}},[e._v("查询")]),e._v(" "),t("el-button",{attrs:{type:"primary",disabled:e.disabled},on:{click:function(a){e.regExport()}}},[e._v("导出")])],1)],1)],1),e._v(" "),t("div",{staticClass:"agentTable"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{data:e.customerTableData,"show-summary":"","summary-method":e.getTotal,"header-cell-style":e.getRowClass}},[t("el-table-column",{attrs:{type:"index","header-align":"center",align:"center",width:"80",label:"序号"}}),e._v(" "),t("el-table-column",{attrs:{prop:"payTime",label:"充值时间",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"userName",label:" 客户名称",align:"center"}}),e._v(" "),e.disableAgentName?t("el-table-column",{attrs:{prop:"agentCompanyName",label:"代理商名称",align:"center"}}):e._e(),e._v(" "),t("el-table-column",{attrs:{prop:"userMobile",label:"手机号",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"orderNo",label:"订单编号",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"packageName",label:"套餐选择",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"price",label:"单价（元/条）",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"number",label:"条数",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"money",label:"金额（元）",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"payTypeName",label:"充值方式",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"remark",label:"备注",align:"center"}})],1)],1),e._v(" "),t("div",{staticClass:"agentPage"},[t("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[10,20,30,50],"page-size":e.pageSize,total:e.totalPage,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChangeHandle,"current-change":e.currentChangeHandle}})],1)])},staticRenderFns:[]};var n=t("46Yf")(r,l,!1,function(e){t("gf3y")},null,null);a.default=n.exports},gf3y:function(e,a,t){var r=t("rRvp");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);t("XkoO")("1b2d8219",r,!0)},rRvp:function(e,a,t){(e.exports=t("acE3")(!1)).push([e.i,"\n.topSearch {\n  width: 100%;\n  padding: 10px 23px 20px;\n  background-color: #ffffff;\n  margin-bottom: 24px;\n  -webkit-box-shadow: 0px 7px 9px 0px rgba(153, 153, 153, 0.05);\n          box-shadow: 0px 7px 9px 0px rgba(153, 153, 153, 0.05);\n}\n",""])}});