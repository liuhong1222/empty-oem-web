webpackJsonp([39],{WehA:function(e,t,a){(e.exports=a("acE3")(!1)).push([e.i,"\n.el-row {\n    margin-bottom: 20px;\n&:last-child {\n        margin-bottom: 0;\n}\n}\n.el-col {\n    border-radius: 4px;\n}\n.bg-purple-dark {\n    background: #99a9bf;\n}\n.bg-purple {\n    background: #fff;\n}\n.bg-purple-light {\n    background: #e5e9f2;\n}\n.grid-content {\n    border-radius: 4px;\n    min-height: 340px;\n    margin-bottom: 20px;\n    padding: 10px 20px;\n}\n.grid-content h2 {\n    display: inline-block;\n    font-size: 20px;\n    color: #333;\n}\n.row-bg {\n    padding: 10px 0;\n    background-color: #f9fafc;\n}\n.basicInfo li {\n    width: 48%;\n    height: 100px;\n    float: left;\n    text-align: center\n}\n.basicInfo li input {\n    width: 100%;\n    border: none;\n    display: block;\n    font-size: 18px;\n    font-weight: 700;\n    color: #666;\n    text-align: center;\n}\n.basicInfo li:first-child input {\n    font-size: 30px;\n    color: #4680ff;\n}\n.basicInfo li button {\n    width: 48px;\n    height: 24px;\n    border: solid 1px #999;\n    background-color: #fff;\n    color: #7b7b7b;\n    font-size: 12px;\n    cursor: pointer;\n    margin-top: 15px;\n}\n.basicInfo li button:hover {\n    border: none;\n    background-color: #4680ff;\n    color: #fff;\n}\n.el-table {\n    min-height: 0px;\n    font-size: 14px;\n}\n.el-table td,\n.el-table th.is-leaf {\n    border-bottom: 0\n}\n.el-table td {\n    padding: 10px 0;\n    text-align: center\n}\n.el-table th {\n    color: #666;\n    font-weight: 400;\n    text-align: center\n}\n.el-table::before {\n    left: 0;\n    bottom: 0;\n    width: 100%;\n    height: 0px;\n}\n",""])},X2fY:function(e,t,a){var n=a("WehA");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("XkoO")("4fa0c24a",n,!0)},pMCn:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("AX1m"),i=a("E4LH"),o={data:function(){var e=function(e,t,a){Object(i.a)(t)?a():a(new Error("邮箱格式错误"))};return{addEmailVisible:!1,reEmailVisible:!1,reBindVisible:!1,addemailform:{email:""},addemailrules:{email:[{required:!0,message:"邮箱不能为空",trigger:"blur"},{validator:e,trigger:"blur"}]},reemailform:{oldemail:"",newemail:""},basicInfoList:[{title:"我的待办",data:"",flag:!1},{title:"手机号",data:"",flag:!0,btnText:"更改"},{title:"邮箱",data:"",flag:!0,btnText:"更改"}],reemailrules:{newemail:[{required:!0,message:"新邮箱不能为空",trigger:"blur"},{validator:e,trigger:"blur"}]},tableData:[],oemAgent:[{title:"代理商数量",counts:""},{title:"充值总金额（元）",counts:""},{title:"消耗总计（条）",counts:""}]}},computed:{userName:{get:function(){return this.$store.state.user.name}}},activated:function(){this.oemRegRecode(),this.getAdminDeskInfo(),this.myAgent()},components:{reBindPhone:n.default},methods:{basicInfoBtn:function(e,t){var a=this;1==e?(this.reBindVisible=!0,this.$nextTick(function(){var e=a.basicInfoList[1].data;a.$refs.reBindPhoneCon.showInit(e)})):2==e&&(""==t||null==t?(console.log("添加弹出框"),this.addEmailVisible=!0,this.$nextTick(function(){a.$refs.addemailruleForm.resetFields()})):(console.log("修改弹出框"),this.reemailform.oldemail=this.basicInfoList[2].data,this.reEmailVisible=!0,this.$nextTick(function(){a.$refs.reemailruleForm.resetFields()})))},myAgent:function(){var e=this;this.$http({url:this.$http.adornUrl("agent/stats/agentCanUpgrade/count?token="+this.$cookie.get("token")),method:"get"}).then(function(t){var a=t.data;a&&0===a.code?e.basicInfoList[0].data=a.data.countAgentCanUpgrade:e.$message.error(a.msg)})},getAdminDeskInfo:function(){var e=this;this.$http({url:this.$http.adornUrl("agent/desk/getAdminDeskInfo?token="+this.$cookie.get("token")),method:"post"}).then(function(t){var a=t.data;a&&0===a.code?(e.basicInfoList[1].data=a.data.mobile,e.basicInfoList[2].data=a.data.email,e.oemAgent[0].counts=a.data.agentCount,e.oemAgent[1].counts=a.data.rechargeSum,e.oemAgent[2].counts=a.data.consumSum):e.$message.error(a.msg)})},addEmailBtn:function(){var e=this;this.$refs.addemailruleForm.validate(function(t){t&&e.$http({url:e.$http.adornUrl("agent/desk/updateMail?token="+e.$cookie.get("token")),method:"post",params:e.$http.adornParams({mail:e.addemailform.email})}).then(function(t){var a=t.data;a&&0===a.code?(e.addEmailVisible=!1,e.basicInfoList[2].data=e.addemailform.email,e.$message.success("成功!")):e.$message.error(a.msg)})})},reEmailBtn:function(){var e=this;this.$refs.reemailruleForm.validate(function(t){t&&e.$http({url:e.$http.adornUrl("agent/desk/updateMail?token="+e.$cookie.get("token")),method:"post",params:e.$http.adornParams({mail:e.reemailform.newemail})}).then(function(t){var a=t.data;a&&0===a.code?(e.reEmailVisible=!1,e.basicInfoList[2].data=e.reemailform.newemail,e.$message.success("成功!")):e.$message.error(a.msg)})})},showDetails:function(){this.$router.push({name:"finance-agentrecharge"})},oemRegRecode:function(){var e=this;this.$http({url:this.$http.adornUrl("agent/finance/agent/recharge/list?token="+this.$cookie.get("token")),method:"get",params:this.$http.adornParams({currentPage:1,pageSize:5})}).then(function(t){var a=t.data;a&&0===a.code?e.tableData=a.data.list:e.tableData=[]})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("h2",[e._v("嗨！"+e._s(e.userName))]),e._v(" "),a("ul",{staticClass:"cf basicInfo"},e._l(e.basicInfoList,function(t,n){return a("li",{key:n},[a("p",[e._v(e._s(t.title))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data,expression:"item.data"}],attrs:{type:"text",readonly:""},domProps:{value:t.data,value:t.data},on:{input:function(a){a.target.composing||e.$set(t,"data",a.target.value)}}}),e._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:t.flag,expression:"item.flag"}],on:{click:function(a){e.basicInfoBtn(n,t.data)}}},[e._v(e._s("邮箱"===t.title&&""===t.data||null===t.data?"添加":t.btnText))])])}))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("div",{staticClass:"cf"},[a("h2",[e._v("OEM充值记录")]),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"text"},on:{click:function(t){e.showDetails()}}},[e._v("查看详情")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"250","highlight-current-row":!1}},[a("el-table-column",{attrs:{prop:"companyName",label:"代理商名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payTime",label:"充值时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"money",label:"充值金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:"充值条数"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("h2",[e._v("OEM代理")]),e._v(" "),a("ul",{staticClass:"cf customerList"},e._l(e.oemAgent,function(t,n){return a("li",{key:n},[a("p",[e._v(e._s(t.title))]),e._v(" "),a("p",[e._v(e._s(t.counts))])])}))])])],1),e._v(" "),a("el-dialog",{attrs:{title:"添加邮箱",visible:e.addEmailVisible},on:{"update:visible":function(t){e.addEmailVisible=t}}},[a("el-form",{ref:"addemailruleForm",attrs:{model:e.addemailform,rules:e.addemailrules}},[a("el-form-item",{attrs:{label:"新邮箱",prop:"email"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addemailform.email,callback:function(t){e.$set(e.addemailform,"email",t)},expression:"addemailform.email"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addEmailBtn()}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"重新绑定邮箱",visible:e.reEmailVisible},on:{"update:visible":function(t){e.reEmailVisible=t}}},[a("el-form",{ref:"reemailruleForm",attrs:{model:e.reemailform,rules:e.reemailrules}},[a("el-form-item",{attrs:{label:"原邮箱"}},[a("el-input",{attrs:{id:"emailInput",readonly:""},model:{value:e.reemailform.oldemail,callback:function(t){e.$set(e.reemailform,"oldemail",t)},expression:"reemailform.oldemail"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"新邮箱",prop:"newemail"}},[a("el-input",{model:{value:e.reemailform.newemail,callback:function(t){e.$set(e.reemailform,"newemail",t)},expression:"reemailform.newemail"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.reEmailBtn()}}},[e._v("确 定")])],1)],1),e._v(" "),e.reBindVisible?a("re-bind-phone",{ref:"reBindPhoneCon"}):e._e()],1)},staticRenderFns:[]};var r=a("46Yf")(o,l,!1,function(e){a("X2fY")},null,null);t.default=r.exports}});