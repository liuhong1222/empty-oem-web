webpackJsonp([19],{"+NZg":function(e,r,a){(e.exports=a("acE3")(!1)).push([e.i,"\n#mobile,\n#myCounts {\n    border: none\n}\n",""])},"1xdG":function(e,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t={data:function(){return{readPrice:!0,readCounts:!0,readMoney:!0,chargeVisible:!1,labelPosition:"right",rechargeArr:[],number:0,rechargeDataForm:{creUserId:"",userName:"",packageList:"",price:"",rechargeCounts:"",rechargeMoney:"",myCounts:"",rechargeMethod:"",rechargeDesc:""},rechargerules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],packageList:[{required:!0,message:"请选择套餐",trigger:"blur"}],price:[{required:!0,message:"请输入单价",trigger:"blur"}],rechargeCounts:[{required:!0,message:"请输入充值金额，自动算出条数",trigger:"blur"}],rechargeMoney:[{required:!0,message:"请输入充值金额",trigger:"blur"},{type:"number",message:"金额必须为数字"}],myCounts:[{required:!0,message:"请输我的余额",trigger:"blur"}],rechargeMethod:[{required:!0,message:"请选择充值方式",trigger:"blur"}]}}},watch:{"rechargeDataForm.rechargeMoney":function(){1==this.number&&(""!==this.rechargeDataForm.rechargeMoney&&""!==this.rechargeDataForm.price?this.rechargeDataForm.rechargeCounts=Math.ceil(Number(this.rechargeDataForm.rechargeMoney)/this.rechargeDataForm.price):this.rechargeDataForm.rechargeCounts="")}},methods:{packagePro:function(){var e=this;this.$http({url:this.$http.adornUrl("agent/cust/getPackageInfo?token="+this.$cookie.get("token")),method:"get",params:this.$http.adornParams({creUserId:this.rechargeDataForm.creUserId,custName:this.rechargeDataForm.userName})}).then(function(r){var a=r.data;a&&0===a.code?(e.rechargeArr=a.data,e.rechargeDataForm.userName=a.custName,e.rechargeDataForm.myCounts=a.amount):e.$message.error(a.msg)})},rechargeInit:function(e){var r=this;this.rechargeDataForm.creUserId=e[2],this.rechargeDataForm.userName=e[3],0==e[1]||null==e[1]?(this.chargeVisible=!0,this.packagePro(),this.$nextTick(function(){r.$refs.rechargeRef.resetFields()})):(this.chargeVisible=!0,this.priseurl=this.$http.adornUrl("agent/agentInfo/license/upload?token="+this.$cookie.get("token")),this.packagePro(),this.$nextTick(function(){r.$refs.rechargeRef.resetFields()}))},selectT:function(){var e=this;this.$http({url:this.$http.adornUrl("agent/cust/getPackageInfoById?token="+this.$cookie.get("token")),method:"post",params:this.$http.adornParams({id:this.rechargeDataForm.packageList})}).then(function(r){var a=r.data;a&&0===a.code?1==a.data.number?(e.readPrice=!1,e.readCounts=!1,e.readMoney=!1,e.rechargeDataForm.price=a.data.price,e.rechargeDataForm.rechargeCounts="",e.rechargeDataForm.rechargeMoney="",e.number=1):(e.readPrice=!0,e.readCounts=!0,e.readMoney=!0,e.rechargeDataForm.price=a.data.price,e.rechargeDataForm.rechargeCounts=a.data.number,e.rechargeDataForm.rechargeMoney=a.data.money,e.number=0):e.$message.error(a.msg)})},rechargeDataSubmit:function(){var e=this;this.$refs.rechargeRef.validate(function(r){r&&e.$http({url:e.$http.adornUrl("agent/cust/recharge?token="+e.$cookie.get("token")),method:"post",params:e.$http.adornParams({agentPackageId:e.rechargeDataForm.packageList,creUserId:e.rechargeDataForm.creUserId,number:e.rechargeDataForm.rechargeCounts,amount:e.rechargeDataForm.rechargeMoney,payType:e.rechargeDataForm.rechargeMethod,remark:e.rechargeDataForm.rechargeDesc})}).then(function(r){var a=r.data;a&&0===a.code?e.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){e.chargeVisible=!1,e.$emit("refreshDataList")}}):e.$message.error(a.msg)})})}}},o={render:function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("el-dialog",{attrs:{title:"充值",visible:e.chargeVisible,width:"40%"},on:{"update:visible":function(r){e.chargeVisible=r}}},[a("el-form",{ref:"rechargeRef",attrs:{model:e.rechargeDataForm,rules:e.rechargerules,"label-width":"150px","label-position":e.labelPosition}},[a("el-form-item",{attrs:{label:"客户名称：",prop:"userName"}},[a("el-input",{attrs:{placeholder:"客户名称",id:"mobile",readonly:""},model:{value:e.rechargeDataForm.userName,callback:function(r){e.$set(e.rechargeDataForm,"userName",r)},expression:"rechargeDataForm.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"套餐选择：",prop:"packageList"}},[a("el-select",{attrs:{placeholder:"请选择套餐"},on:{change:function(r){e.selectT()}},model:{value:e.rechargeDataForm.packageList,callback:function(r){e.$set(e.rechargeDataForm,"packageList",r)},expression:"rechargeDataForm.packageList"}},e._l(e.rechargeArr,function(e,r){return a("el-option",{key:r,attrs:{value:e.id,label:e.package_name}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"单价：",prop:"price"}},[a("el-input",{attrs:{placeholder:"单价",readonly:e.readPrice},model:{value:e.rechargeDataForm.price,callback:function(r){e.$set(e.rechargeDataForm,"price",r)},expression:"rechargeDataForm.price"}}),e._v(" "),a("span",[e._v("元/条")])],1),e._v(" "),a("el-form-item",{attrs:{label:"充值金额：",prop:"rechargeMoney"}},[a("el-input",{attrs:{placeholder:"输入金额，计算出条数",readonly:e.readMoney},model:{value:e.rechargeDataForm.rechargeMoney,callback:function(r){e.$set(e.rechargeDataForm,"rechargeMoney",e._n(r))},expression:"rechargeDataForm.rechargeMoney"}}),e._v(" "),a("span",[e._v("元")])],1),e._v(" "),a("el-form-item",{attrs:{label:"充值条数：",prop:"rechargeCounts"}},[a("el-input",{attrs:{placeholder:"充值条数",readonly:e.readCounts},model:{value:e.rechargeDataForm.rechargeCounts,callback:function(r){e.$set(e.rechargeDataForm,"rechargeCounts",r)},expression:"rechargeDataForm.rechargeCounts"}}),e._v(" "),a("span",[e._v("条")])],1),e._v(" "),a("el-form-item",{attrs:{label:"我的余额：",prop:"myCounts"}},[a("el-input",{attrs:{placeholder:"我的余额",id:"myCounts",readonly:""},model:{value:e.rechargeDataForm.myCounts,callback:function(r){e.$set(e.rechargeDataForm,"myCounts",r)},expression:"rechargeDataForm.myCounts"}}),e._v(" "),a("span",[e._v("条")])],1),e._v(" "),a("el-form-item",{attrs:{label:"充值方式：",prop:"rechargeMethod"}},[a("el-select",{attrs:{placeholder:"请选择充值方式"},model:{value:e.rechargeDataForm.rechargeMethod,callback:function(r){e.$set(e.rechargeDataForm,"rechargeMethod",r)},expression:"rechargeDataForm.rechargeMethod"}},[a("el-option",{attrs:{label:"支付宝",value:"5"}}),e._v(" "),a("el-option",{attrs:{label:"对公转账",value:"6"}}),e._v(" "),a("el-option",{attrs:{label:"赠送",value:"7"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注：",prop:"rechargeDesc"}},[a("el-input",{attrs:{type:"textarea",placeholder:"备注"},model:{value:e.rechargeDataForm.rechargeDesc,callback:function(r){e.$set(e.rechargeDataForm,"rechargeDesc",r)},expression:"rechargeDataForm.rechargeDesc"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(r){e.chargeVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.rechargeDataSubmit}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var c=a("46Yf")(t,o,!1,function(e){a("FlLo")},null,null);r.default=c.exports},FlLo:function(e,r,a){var t=a("+NZg");"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);a("XkoO")("081b3237",t,!0)}});