webpackJsonp([35],{FqBA:function(e,a,t){(e.exports=t("acE3")(!1)).push([e.i,"\n.topSearch {\n  width: 100%;\n  padding: 10px 23px 20px;\n  background-color: #ffffff;\n  margin-bottom: 24px;\n  -webkit-box-shadow: 0px 7px 9px 0px rgba(153, 153, 153, 0.05);\n          box-shadow: 0px 7px 9px 0px rgba(153, 153, 153, 0.05);\n}\n",""])},YVAe:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n={data:function(){return{dataListLoading:!1,disabled:!1,disableAgent:!0,disableAgentName:!0,consumeSearchData:{dateTime:[],agentName:"",custName:"",mobile:""},consumeTableData:[],pageIndex:1,pageSize:10,totalPage:0,pickerOptions0:{disabledDate:function(e){return e.getTime()>Date.now()-864e4}}}},activated:function(){this.consumeList()},methods:{consumeList:function(){var e=this;"2"==sessionStorage.getItem("msjRoleName")&&(this.disableAgent=!1,this.disableAgentName=!1),this.dataListLoading=!0,this.$http({url:this.$http.adornUrl("agent/finance/user/consume/list?token="+this.$cookie.get("token")),method:"get",params:this.$http.adornParams({currentPage:this.pageIndex,pageSize:this.pageSize,userMobile:this.consumeSearchData.mobile,companyName:this.consumeSearchData.agentName,userName:this.consumeSearchData.custName,startTime:null==this.consumeSearchData.dateTime?"":this.consumeSearchData.dateTime[0],endTime:null==this.consumeSearchData.dateTime?"":this.consumeSearchData.dateTime[1]})}).then(function(a){var t=a.data;t&&0===t.code?(e.consumeTableData=t.data.list,e.totalPage=t.data.total,0==t.data.list.length?e.disabled=!0:e.disabled=!1):(e.consumeTableData=[],e.totalPage=0),e.dataListLoading=!1})},sizeChangeHandle:function(e){this.pageSize=e,this.pageIndex=1,this.consumeList()},currentChangeHandle:function(e){this.pageIndex=e,this.consumeList()},getTotal:function(e){var a=e.columns,t=e.data,n=[];return a.forEach(function(e,a){if(0!==a){var s=t.map(function(a){return Number(a[e.property])});"number"===e.property?(n[a]=s.reduce(function(e,a){var t=Number(a);return isNaN(t)?e:e+a},0),n[a]+=" 条"):n[a]="--"}else n[a]="合计"}),n},getRowClass:function(e){e.row,e.column;var a=e.rowIndex;e.columnIndex;return 0==a?"background-color: #f8f8f8;color:#666;":""},consumeExport:function(){var e=void 0,a=void 0;null==this.consumeSearchData.dateTime?(e="",a=""):0==this.consumeSearchData.dateTime.length?(e="",a=""):(e=this.consumeSearchData.dateTime[0],a=this.consumeSearchData.dateTime[1]),window.open(this.$http.adornUrl("agent/finance/user/consume/list/export?token="+this.$cookie.get("token")+"&currentPage="+this.pageIndex+"&pageSize="+this.pageSize+"&userName="+this.consumeSearchData.custName+"&companyName="+this.consumeSearchData.agentName+"&userMobile="+this.consumeSearchData.mobile+"&startTime="+e+"&endTime="+a))}}},s={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"main"},[t("div",{staticClass:"topSearch"},[t("h2",[e._v("客户消耗记录")]),e._v(" "),t("el-form",{attrs:{inline:!0,model:e.consumeSearchData}},[t("el-form-item",{attrs:{label:"创建时间："}},[t("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions0},model:{value:e.consumeSearchData.dateTime,callback:function(a){e.$set(e.consumeSearchData,"dateTime",a)},expression:"consumeSearchData.dateTime"}})],1),e._v(" "),t("el-form-item",{staticStyle:{"margin-left":"35px"},attrs:{label:"客户手机号："}},[t("el-input",{attrs:{placeholder:"客户手机号",clearable:""},model:{value:e.consumeSearchData.mobile,callback:function(a){e.$set(e.consumeSearchData,"mobile",a)},expression:"consumeSearchData.mobile"}})],1),e._v(" "),e.disableAgent?t("el-form-item",{attrs:{label:"代理商名称："}},[t("el-input",{attrs:{placeholder:"代理商名称",clearable:""},model:{value:e.consumeSearchData.agentName,callback:function(a){e.$set(e.consumeSearchData,"agentName",a)},expression:"consumeSearchData.agentName"}})],1):e._e(),e._v(" "),t("el-form-item",{staticStyle:{"margin-left":"-2px"},attrs:{label:"客户名称："}},[t("el-input",{attrs:{placeholder:"客户名称",clearable:""},model:{value:e.consumeSearchData.custName,callback:function(a){e.$set(e.consumeSearchData,"custName",a)},expression:"consumeSearchData.custName"}})],1),e._v(" "),t("el-form-item",{staticStyle:{"margin-left":"6px"}},[t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.consumeList()}}},[e._v("查询")]),e._v(" "),t("el-button",{attrs:{type:"primary",disabled:e.disabled},on:{click:function(a){e.consumeExport()}}},[e._v("导出")])],1)],1)],1),e._v(" "),t("div",{staticClass:"agentTable"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{data:e.consumeTableData,"show-summary":"","summary-method":e.getTotal,"header-cell-style":e.getRowClass}},[t("el-table-column",{attrs:{type:"index","header-align":"center",align:"center",width:"80",label:"序号"}}),e._v(" "),t("el-table-column",{attrs:{prop:"userName",label:" 客户名称",align:"center"}}),e._v(" "),e.disableAgentName?t("el-table-column",{attrs:{prop:"agentCompanyName",label:"代理商名称",align:"center"}}):e._e(),e._v(" "),t("el-table-column",{attrs:{prop:"consumeTime",label:"消耗时间",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"number",label:"消耗条数（条）",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"userMobile",label:"手机号",align:"center"}})],1)],1),e._v(" "),t("div",{staticClass:"agentPage"},[t("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[10,20,30,50],"page-size":e.pageSize,total:e.totalPage,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChangeHandle,"current-change":e.currentChangeHandle}})],1)])},staticRenderFns:[]};var i=t("46Yf")(n,s,!1,function(e){t("aHhV")},null,null);a.default=i.exports},aHhV:function(e,a,t){var n=t("FqBA");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);t("XkoO")("3cad42d1",n,!0)}});